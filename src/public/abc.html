<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Serious Lion Animation</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: sans-serif;
        }
        canvas {
            display: block;
        }
    </style>
</head>
<body>
    <script>
        class LionShape {
            constructor() {
                // Coordinates for realistic lion face, smaller dots
                this.finalPositions = [
                    // Face features
                    { pos: createVector(0, 0), color: '#EE82EE', size: 9.6 }, // Nose (middle, violet)
                    { pos: createVector(-25, -25), color: '#000000', size: 6.4 }, // Left eye (black)
                    { pos: createVector(25, -25), color: '#000000', size: 6.4 }, // Right eye (black)
                    { pos: createVector(-30, -35), color: '#ff8080', size: 4.8 }, // Left eyebrow (light red)
                    { pos: createVector(30, -35), color: '#99ccff', size: 4.8 }, // Right eyebrow (light blue)
                    { pos: createVector(-40, 15), color: '#ff8080', size: 4.8 }, // Left whisker top (light red)
                    { pos: createVector(40, 15), color: '#99ccff', size: 4.8 }, // Right whisker top (light blue)
                    { pos: createVector(-40, 30), color: '#ff8080', size: 4.8 }, // Left whisker middle (light red)
                    { pos: createVector(40, 30), color: '#99ccff', size: 4.8 }, // Right whisker middle (light blue)
                    { pos: createVector(-40, 45), color: '#ff8080', size: 4.8 }, // Left whisker bottom (light red)
                    { pos: createVector(40, 45), color: '#99ccff', size: 4.8 }, // Right whisker bottom (light blue)
                    { pos: createVector(-20, 55), color: '#ff8080', size: 4.8 }, // Left mouth corner (light red)
                    { pos: createVector(20, 55), color: '#99ccff', size: 4.8 }, // Right mouth corner (light blue)

                    // Inner Mane
                    { pos: createVector(-55, -55), color: '#ff8080', size: 6.4 }, // Left ear top (light red)
                    { pos: createVector(55, -55), color: '#99ccff', size: 6.4 }, // Right ear top (light blue)
                    { pos: createVector(-75, -15), color: '#ff8080', size: 6.4 }, // Left mid-upper mane (light red)
                    { pos: createVector(75, -15), color: '#99ccff', size: 6.4 }, // Right mid-upper mane (light blue)
                    { pos: createVector(-75, 25), color: '#ff8080', size: 6.4 }, // Left mid-lower mane (light red)
                    { pos: createVector(75, 25), color: '#99ccff', size: 6.4 }, // Right mid-lower mane (light blue)
                    { pos: createVector(-55, 65), color: '#ff8080', size: 6.4 }, // Left lower mane (light red)
                    { pos: createVector(55, 65), color: '#99ccff', size: 6.4 }, // Right lower mane (light blue)

                    // Outer Mane
                    { pos: createVector(-110, -80), color: '#ff8080', size: 8 }, // Top left mane (light red)
                    { pos: createVector(110, -80), color: '#99ccff', size: 8 }, // Top right mane (light blue)
                    { pos: createVector(-130, -40), color: '#ff8080', size: 8 }, // Upper left mane (light red)
                    { pos: createVector(130, -40), color: '#99ccff', size: 8 }, // Upper right mane (light blue)
                    { pos: createVector(-140, 0), color: '#ff8080', size: 8 }, // Mid left mane (light red)
                    { pos: createVector(140, 0), color: '#99ccff', size: 8 }, // Mid right mane (light blue)
                    { pos: createVector(-130, 40), color: '#ff8080', size: 8 }, // Lower left mane (light red)
                    { pos: createVector(130, 40), color: '#99ccff', size: 8 }, // Lower right mane (light blue)
                    { pos: createVector(-110, 80), color: '#ff8080', size: 8 }, // Bottom left mane (light red)
                    { pos: createVector(110, 80), color: '#99ccff', size: 8 }, // Bottom right mane (light blue)
                    { pos: createVector(-80, 100), color: '#ff8080', size: 8 }, // Bottom left spike (light red)
                    { pos: createVector(80, 100), color: '#99ccff', size: 8 }, // Bottom right spike (light blue)
                    { pos: createVector(0, 110), color: '#EE82EE', size: 8 }, // Bottom center mane (violet)
                    { pos: createVector(-50, -100), color: '#ff8080', size: 8 }, // Top left spike (light red)
                    { pos: createVector(50, -100), color: '#99ccff', size: 8 } // Top right spike (light blue)
                ];

                // Edges for lion face outline
                this.edges = [
                    // Face outline
                    [0, 1], [0, 2], [1, 3], [2, 4], [1, 5], [2, 6], [5, 7], [6, 8], [7, 9], [8, 10], [9, 11], [10, 12], [11, 12],
                    // Inner mane loop
                    [13, 15], [15, 17], [17, 19], [19, 20], [20, 18], [18, 16], [16, 14], [14, 13],
                    // Outer mane loop
                    [21, 23], [23, 25], [25, 27], [27, 29], [29, 31], [31, 32], [32, 30], [30, 28], [28, 26], [26, 24], [24, 22], [22, 34], [34, 21],
                    // Connect face to inner mane
                    [0, 15], [0, 16], [1, 13], [2, 14], [9, 17], [10, 18], [11, 19], [12, 20],
                    // Connect inner to outer mane
                    [13, 21], [14, 22], [15, 23], [16, 24], [17, 25], [18, 26], [19, 27], [20, 28]
                ];

                this.animationProgress = 0;
                this.initialPoints = [];
                for (let i = 0; i < this.finalPositions.length; i++) {
                    const radius = random(5, 10);
                    const angle = random(TWO_PI);
                    const x = cos(angle) * radius;
                    const y = sin(angle) * radius;
                    this.initialPoints.push(createVector(x, y));
                }
            }

            update() {
                if (this.animationProgress < 1) {
                    this.animationProgress += 0.005;
                }
            }

            display() {
                translate(width / 2, height / 2);
                scale(1.6); // Reduced overall face size

                // Draw dots with dynamic eye color
                for (let i = 0; i < this.finalPositions.length; i++) {
                    const finalPos = this.finalPositions[i].pos;
                    const initialPos = this.initialPoints[i];
                    const currentPos = p5.Vector.lerp(initialPos, finalPos, this.animationProgress);

                    // Change eye color (indices 1 and 2) based on dark mode
                    let dotColor = this.finalPositions[i].color;
                    if (i === 1 || i === 2) {
                        dotColor = isDarkMode ? '#FFFFFF' : '#000000';
                    }
                    fill(dotColor);
                    noStroke();
                    circle(currentPos.x, currentPos.y, this.finalPositions[i].size);
                }

                // Draw dotted lines
                if (this.animationProgress > 0.4) {
                    const lineOpacity = map(this.animationProgress, 0.4, 1, 0, 255);
                    stroke(0, lineOpacity);
                    strokeWeight(1);
                    drawingContext.setLineDash([5, 5]);

                    for (let edge of this.edges) {
                        if (edge[0] < this.finalPositions.length && edge[1] < this.finalPositions.length) {
                            const startPoint = this.finalPositions[edge[0]].pos;
                            const endPoint = this.finalPositions[edge[1]].pos;
                            const currentStart = p5.Vector.lerp(this.initialPoints[edge[0]], startPoint, this.animationProgress);
                            const currentEnd = p5.Vector.lerp(this.initialPoints[edge[1]], endPoint, this.animationProgress);

                            line(currentStart.x, currentStart.y, currentEnd.x, currentEnd.y);
                        }
                    }
                    drawingContext.setLineDash([]);
                }
            }
        }

        let myLion;
        let isDarkMode = false;

        function setup() {
            createCanvas(windowWidth, windowHeight);
            myLion = new LionShape();
        }

        function draw() {
            background(isDarkMode ? '#1A1A1A' : '#FFFFFF');
            myLion.update();
            myLion.display();
        }

        function keyPressed() {
            if (key === 'd' || key === 'D') {
                isDarkMode = !isDarkMode;
            }
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }
    </script>
</body>
</html>